#!/usr/bin/env ruby

$LOAD_PATH.push File.expand_path('../../lib/', __FILE__)

require 'watirsauce'

def watirsauce_usage
  puts "\n\nPlease run WatirSauce with a YAML file.",
       "See the included sample_site_config.yaml for reference.",
       "",
       "Options:",
       "\t-h,--help:      Display this text",
       "\t--mobile-only:  Only test mobile browsers",
       "\t--desktop-only: Only test desktop browsers"
end


if ( ARGV.include?("-h") || ARGV.include?("--help") ) 
  watirsauce_usage
  exit(0)
end

unless ARGV[0] && File.exists?(ARGV[0]) 
  watirsauce_usage
  exit(1)
end

unless ENV['SAUCE_USERNAME'] && ENV['SAUCE_ACCESS_KEY']
  puts "SAUCE_USERNAME and SAUCE_ACCESS_KEY environment variables are required.",
       "See https://docs.saucelabs.com/tutorials/ruby/ and modify your environment as necessary."
  exit(1)
end

WatirSauce::Runner.new(ARGV[0])
